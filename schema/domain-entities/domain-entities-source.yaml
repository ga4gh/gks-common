$schema: "https://json-schema.org/draft/2020-12/schema"
$id: "https://w3id.org/ga4gh/schema/gks-common/1.0.0-ballot.2024.08.1/domain-entities/domain-entities-source.yaml"
title: GKS Common Domain Entities Definitions
strict: true

imports:
  gks.core-im: ../core-im/core-im-source.yaml
  gks.data-types: ../data-types/data-types-source.yaml

$defs:

# Condition related domain entities
  Condition:
    inherits: gks.core-im:DomainEntity
    maturity: draft
    description: >-
      A disease or other medical disorder.
    oneOf:
      - $ref: "#/$defs/TraitSet"
      - $ref: "#/$defs/Disease"
      - $ref: "#/$defs/Phenotype"

  TraitSet:
    type: object
    inherits: Condition
    maturity: draft
    description: >-
      A set of phenotype and/or disease concepts that together constitute a condition.
    properties:
      type:
        extends: type
        const: TraitSet
        default: TraitSet
        description: MUST be "TraitSet".
      traits:
        type: array
        ordered: false
        items:
          anyOf:
            - $ref: "#/$defs/Disease"
            - $ref: "#/$defs/Phenotype"
        minItems: 2
    required:
      - traits

  Disease:
    type: object
    inherits: Condition
    maturity: draft
    description: >-
      A particular abnormal condition that negatively affects the structure or function
      of all or part of an organism and is not immediately due to any external injury.
    properties:
      type:
        extends: type
        const: Disease
        default: Disease
        description: MUST be "Disease".

  Phenotype:
    type: object
    inherits: Condition
    maturity: draft
    description: >-
      An observable characteristic or trait of an organism.
    properties:
      type:
        extends: type
        const: Phenotype
        default: Phenotype
        description: MUST be "Phenotype".

# Gene related domain entities
  Gene:
    type: object
    inherits: gks.core-im:DomainEntity
    maturity: draft
    description: >-
      A basic physical and functional unit of heredity.
    properties:
      type:
        type: string
        const: "Gene"
        default: "Gene"
        description: MUST be "Gene"

# Therapeutic Procedures related domain entities
  TherapeuticProcedure:
    inherits: gks.core-im:DomainEntity
    maturity: draft
    description: >-
      An action or administration of therapeutic agents to produce an effect
      that is intended to alter or stop a pathologic process.
    oneOf:
      - $ref: "#/$defs/CombinationTherapy"
      - $ref: "#/$defs/TherapeuticSubstituteGroup"
      - $ref: "#/$defs/TherapeuticAction"
      - $ref: "#/$defs/TherapeuticAgent"

  TherapeuticAction:
    type: object
    inherits: TherapeuticProcedure
    maturity: draft
    description: >-
      A therapeutic action taken that is intended to alter or stop a pathologic
      process.
    properties:
      type:
        extends: type
        const: TherapeuticAction
        default: TherapeuticAction
        description: MUST be "TherapeuticAction".

  TherapeuticAgent:
    type: object
    inherits: TherapeuticProcedure
    maturity: draft
    description: >-
      An administered therapeutic agent that is intended to alter or stop a pathologic
      process.
    properties:
      type:
        extends: type
        const: TherapeuticAgent
        default: TherapeuticAgent
        description: MUST be "TherapeuticAgent".

  CombinationTherapy:
    type: object
    inherits: TherapeuticProcedure
    maturity: draft
    description: >-
      A therapeutic procedure that involves multiple different therapeutic procedures
      performed in combination.
    properties:
      type:
        extends: type
        const: CombinationTherapy
        default: CombinationTherapy
        description: MUST be "CombinationTherapy".
      components:
        type: array
        ordered: false
        description: >-
          The individual therapeutic procedure components that constitute the combination therapy.
        items:
          anyOf:
            - $ref: "#/$defs/TherapeuticSubstituteGroup"
            - $ref: "#/$defs/TherapeuticAction"
            - $ref: "#/$defs/TherapeuticAgent"
        minItems: 2
    required:
      - components

  TherapeuticSubstituteGroup:
    type: object
    inherits: TherapeuticProcedure
    maturity: draft
    description: >-
      A group of therapeutic procedures that may be treated as substitutes for one another.
    properties:
      type:
        extends: type
        const: TherapeuticSubstituteGroup
        default: TherapeuticSubstituteGroup
        description: MUST be "TherapeuticSubstituteGroup".
      substitutes:
        type: array
        ordered: false
        description: >-
          The individual therapeutic procedures that may be treated as substitutes.
        items:
          anyOf:
            - $ref: "#/$defs/TherapeuticAction"
            - $ref: "#/$defs/TherapeuticAgent"
        minItems: 2
    required:
      - substitutes
  